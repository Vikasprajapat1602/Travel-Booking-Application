{% extends "core/base.html" %}

{% block title %}My Bookings{% endblock %}

{% block content %}
  <div class="max-w-5xl mx-auto bg-white p-8 rounded-2xl shadow-2xl mt-8">
    <h2 class="text-3xl font-extrabold text-indigo-700 mb-8 text-center tracking-wide">My Bookings</h2>
    <div class="overflow-x-auto">
      <table class="w-full border-collapse rounded-xl overflow-hidden shadow">
        <thead>
          <tr class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white">
            <th class="px-6 py-3 font-semibold">Travel</th>
            <th class="px-6 py-3 font-semibold">Seats</th>
            <th class="px-6 py-3 font-semibold">Total Price</th>
            <th class="px-6 py-3 font-semibold">Status</th>
            <th class="px-6 py-3 font-semibold">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for booking in bookings %}
          <tr class="text-center border-b hover:bg-purple-50 transition-colors">
            <td class="px-4 py-2">
              {{ booking.travel_option.source }} → {{ booking.travel_option.destination }}
            </td>
            <td class="px-4 py-2">{{ booking.number_of_seats }}</td>
            <td class="px-4 py-2">₹{{ booking.total_price }}</td>
            <td class="px-4 py-2">
              {% if booking.status == "Confirmed" %}
                <span class="text-green-600 font-semibold bg-green-50 rounded px-3 py-1">Confirmed</span>
              {% elif booking.status == "Cancelled" %}
                <span class="text-red-600 font-semibold bg-red-50 rounded px-3 py-1">Cancelled</span>
              {% else %}
                <span class="text-gray-500 font-semibold bg-gray-50 rounded px-3 py-1">{{ booking.status }}</span>
              {% endif %}
            </td>
            <td class="px-4 py-2">
              {% if booking.status == "Confirmed" %}
                <a href="{% url 'cancel_booking' booking.id %}"
                   class="bg-gradient-to-r from-red-500 to-red-700 text-white px-4 py-2 rounded-lg font-medium shadow hover:opacity-90 transition">
                  Cancel
                </a>
              {% else %}
                <span class="text-gray-400">-</span>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center py-6 text-gray-500">No bookings yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
